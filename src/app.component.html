
<div class="min-h-screen bg-gray-900 text-white p-2 md:p-4 flex flex-col">
  <!-- Header Compact -->
  <header class="mb-4 flex items-start justify-between pt-2 px-2 h-16">
    <div class="flex items-center gap-2 pt-1">
      <div class="w-8 h-8 bg-green-600 rounded-full flex items-center justify-center shadow-lg">
        <span class="text-lg">‚ô†Ô∏è</span>
      </div>
      <h1 class="text-xl md:text-2xl font-bold bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent hidden sm:block">
        Bi-a Si√™u C√∫p
      </h1>
      <h1 class="text-lg font-bold bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent sm:hidden">
        Th·∫ßn T√†i Chia B√†i
      </h1>
    </div>

    <!-- Right Side Buttons -->
    @if (gameService.myName()) {
      <div class="flex flex-col items-end gap-1.5 z-30">
        <!-- Exit Button -->
        <button 
          (click)="gameService.leaveGame()"
          class="bg-red-900/40 hover:bg-red-800 text-red-200 text-[10px] uppercase font-bold tracking-wider px-3 py-1.5 rounded border border-red-800/50 transition-colors w-28 text-center"
        >
          Tho√°t / ƒê·ªïi t√™n
        </button>

        <div class="flex gap-1">
            <!-- Turn Order Button -->
            <button 
              (click)="toggleTurnOrder()"
              class="bg-purple-900/40 hover:bg-purple-800 text-purple-200 text-[10px] uppercase font-bold tracking-wider px-2 py-1.5 rounded border border-purple-800/50 transition-colors w-14 sm:w-auto text-center flex items-center justify-center gap-1"
              title="Xem th·ª© t·ª± ƒë√°nh"
            >
              <span>üî¢</span> <span class="hidden sm:inline">Th·ª© t·ª±</span>
            </button>

            <!-- Leaderboard Button -->
            <button 
              (click)="toggleLeaderboard()"
              class="bg-blue-900/40 hover:bg-blue-800 text-blue-200 text-[10px] uppercase font-bold tracking-wider px-2 py-1.5 rounded border border-blue-800/50 transition-colors w-14 sm:w-auto text-center flex items-center justify-center gap-1"
              title="Xem b·∫£ng x·∫øp h·∫°ng"
            >
              <span>üèÜ</span> <span class="hidden sm:inline">BXH</span>
            </button>
        </div>
      </div>
    }
  </header>

  <!-- Content Area -->
  <main class="flex-grow flex flex-col w-full max-w-md md:max-w-7xl mx-auto relative z-0">
    <!-- Logic Fix: N·∫øu ch∆∞a nh·∫≠p t√™n (ch∆∞a join) th√¨ LU√îN hi·ªÉn th·ªã m√†n h√¨nh Setup -->
    @if (!gameService.myName()) {
        <app-setup-view class="w-full flex-grow flex items-center justify-center" />
    } @else {
        <!-- ƒê√£ c√≥ t√™n th√¨ m·ªõi hi·ªÉn th·ªã theo tr·∫°ng th√°i game -->
        @switch (gameService.phase()) {
          @case ('setup') {
             <div class="flex items-center justify-center h-full">
                <div class="text-center animate-pulse">ƒêang k·∫øt n·ªëi v√†o ph√≤ng...</div>
             </div>
          }
          @case ('lobby') {
            <app-lobby-view class="w-full flex-grow" />
          }
          @case ('order') {
            <app-order-view class="w-full flex-grow" />
          }
          @case ('playing') {
            <app-game-view class="w-full flex-grow h-full" />
          }
        }
    }
  </main>

  <!-- Leaderboard Modal -->
  @if (showLeaderboard()) {
    <app-leaderboard-modal 
      [players]="gameService.players()"
      (close)="showLeaderboard.set(false)"
    />
  }

  <!-- Turn Order Modal -->
  @if (showTurnOrder()) {
    <app-turn-order-modal 
      [players]="gameService.players()"
      (close)="showTurnOrder.set(false)"
    />
  }

  <!-- Footer -->
  <footer class="mt-6 text-center text-gray-600 text-xs pb-4">
    <p>Mobile Optimized ‚Ä¢ Angular v20+ ‚Ä¢ Socket.io</p>
  </footer>
</div>
